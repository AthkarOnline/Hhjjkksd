<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أذكار المسلم - موقع أذكار احترافي</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        :root {
            --primary-color: #2c7744;
            --secondary-color: #3a9d5d;
            --accent-color: #f1c40f;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --gray-color: #6c757d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f8fff8 0%, #e6f7ec 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(42, 157, 93, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 80% 80%, rgba(241, 196, 15, 0.05) 0%, transparent 20%);
            z-index: -1;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--accent-color);
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            padding: 0.5rem;
            border-radius: 4px;
            transition: var(--transition);
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: var(--dark-color);
        }

        .btn-primary:hover {
            background-color: #e6b20a;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            padding: 4rem 0;
            text-align: center;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%232c7744" opacity="0.1"/></svg>');
            background-size: cover;
        }

        .hero h2 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--gray-color);
        }

        .counter-container {
            background-color: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: var(--shadow);
            display: inline-flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .counter {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .counter-label {
            color: var(--gray-color);
        }

        /* Features Section */
        .features {
            padding: 4rem 0;
            background-color: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            color: var(--primary-color);
            position: relative;
            padding-bottom: 1rem;
        }

        .section-title::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }

        .feature-content {
            padding: 1.5rem;
        }

        .feature-content h3 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        /* Rosary Section */
        .rosary-section {
            padding: 4rem 0;
            background: linear-gradient(135deg, #f0f9f4 0%, #e0f3e8 100%);
        }

        .rosary-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .rosary-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }

        .rosary-body {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .rosary-display {
            font-size: 5rem;
            color: var(--primary-color);
            margin: 1rem 0;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rosary-counter {
            font-size: 3rem;
            font-weight: 700;
            color: var(--secondary-color);
            background: #f0f9f4;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 5px solid var(--primary-color);
        }

        .rosary-controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .rosary-presets {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }

        .preset-btn {
            padding: 0.5rem 1rem;
            background-color: #e9ecef;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
        }

        .preset-btn:hover {
            background-color: var(--secondary-color);
            color: white;
        }

        /* Adhkar Section */
        .adhkar-section {
            padding: 4rem 0;
            background-color: rgba(255, 255, 255, 0.7);
        }

        .adhkar-categories {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .category-btn {
            padding: 0.8rem 1.5rem;
            background-color: white;
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            color: var(--primary-color);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .category-btn.active, .category-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .adhkar-container {
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 2rem;
            max-height: 500px;
            overflow-y: auto;
            position: relative;
        }

        .dhikr-card {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            transition: var(--transition);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dhikr-card:last-child {
            border-bottom: none;
        }

        .dhikr-card:hover {
            background-color: #f8f9fa;
            border-radius: 8px;
        }

        .dhikr-text {
            font-size: 1.4rem;
            color: var(--dark-color);
            line-height: 1.8;
            margin-bottom: 1rem;
            text-align: center;
        }

        .dhikr-reference {
            color: var(--gray-color);
            font-style: italic;
            text-align: left;
        }

        .dhikr-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--gray-color);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
        }

        .action-btn:hover {
            background-color: #f0f9f4;
            color: var(--primary-color);
        }

        .dhikr-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--secondary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .search-container {
            margin-bottom: 1.5rem;
            display: flex;
            gap: 10px;
        }

        .search-input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            font-size: 1rem;
        }

        .search-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 0 1.5rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-btn:hover {
            background-color: var(--secondary-color);
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .page-btn.active, .page-btn:hover {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--dark-color) 0%, #23272b 100%);
            color: white;
            padding: 3rem 0 1.5rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            position: relative;
            padding-bottom: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .footer-column h3::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--accent-color);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--accent-color);
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background-color: var(--accent-color);
            color: var(--dark-color);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            nav ul {
                gap: 1rem;
            }
            
            .hero h2 {
                font-size: 2.3rem;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            
            nav ul {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--primary-color);
                flex-direction: column;
                padding: 1rem 0;
                box-shadow: var(--shadow);
            }
            
            nav ul.show {
                display: flex;
            }
            
            .header-container {
                flex-wrap: wrap;
            }
            
            .auth-buttons {
                margin-left: auto;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .feature-card {
                margin-bottom: 1.5rem;
            }
            
            .rosary-display {
                font-size: 3.5rem;
            }
        }

        @media (max-width: 576px) {
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .counter-container {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .rosary-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .dhikr-text {
                font-size: 1.2rem;
            }
            
            .adhkar-categories {
                gap: 0.5rem;
            }
            
            .category-btn {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
        }

        /* Login Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            animation: modalOpen 0.4s ease;
        }

        @keyframes modalOpen {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--dark-color);
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(44, 119, 68, 0.1);
        }

        .forgot-password {
            display: block;
            text-align: right;
            margin-top: 0.5rem;
            color: var(--secondary-color);
            text-decoration: none;
        }

        .modal-footer {
            padding: 0 2rem 2rem;
            text-align: center;
        }

        .switch-mode {
            margin-top: 1rem;
            color: var(--gray-color);
        }

        .switch-mode a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }
        
        /* User Profile */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-color);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--secondary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 3000;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .notification.error {
            background-color: #e74c3c;
        }
        
        /* Loading Spinner */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--primary-color);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* New Sections */
        .section {
            display: none;
            padding: 4rem 0;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        /* Favorites Section */
        .favorites-section {
            background: linear-gradient(135deg, #fff9f0 0%, #fff4e6 100%);
        }
        
        .favorites-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        /* Profile Section */
        .profile-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e6f3ff 100%);
        }
        
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 2rem;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #eee;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
        }
        
        .profile-info h2 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .stat-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: var(--gray-color);
        }
        
        /* Rosary Options */
        .rosary-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }
        
        .rosary-option {
            padding: 0.8rem 1.5rem;
            background: white;
            border: 2px solid #ddd;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .rosary-option.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem;
        }
        
        .empty-state i {
            font-size: 4rem;
            color: var(--gray-color);
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-pray"></i>
                <h1>أذكار المسلم</h1>
            </div>
            
            <nav>
                <button class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
                <ul id="nav-menu">
                    <li><a href="#" class="nav-link active" data-section="home-section">الرئيسية</a></li>
                    <li><a href="#" class="nav-link" data-section="adhkar-section">الأذكار</a></li>
                    <li><a href="#" class="nav-link" data-section="rosary-section">المسبحة</a></li>
                    <li><a href="#" class="nav-link" data-section="favorites-section">المفضلة</a></li>
                    <li><a href="#" class="nav-link" data-section="profile-section">الملف الشخصي</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons" id="auth-buttons">
                <button class="btn btn-outline" id="login-btn">
                    <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                </button>
                <button class="btn btn-primary" id="register-btn">
                    <i class="fas fa-user-plus"></i> إنشاء حساب
                </button>
            </div>
            
            <div class="user-profile" id="user-profile" style="display:none;">
                <div class="user-avatar" id="user-avatar">م</div>
                <div id="username">محمد</div>
                <button class="btn btn-outline" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Main Content Sections -->
    <main id="main-content">
        <!-- Home Section -->
        <section class="hero section active" id="home-section">
            <div class="container">
                <h2>موقع أذكار المسلم الشامل</h2>
                <p>استذكر ربك في كل وقت وحين مع أكبر مجموعة من الأذكار والأدعية المأثورة مصنفة ومرتبة لسهولة الوصول إليها</p>
                
                <div class="counter-container">
                    <div>
                        <div class="counter" id="current-visitors">5,842</div>
                        <div class="counter-label">زائر حالياً</div>
                    </div>
                    <div>
                        <div class="counter" id="total-visitors">1,243,976</div>
                        <div class="counter-label">إجمالي الزيارات</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features section" id="features-section">
            <div class="container">
                <h2 class="section-title">مميزات موقعنا</h2>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-book-quran"></i>
                        </div>
                        <div class="feature-content">
                            <h3>أكثر من 2500 ذكر ودعاء</h3>
                            <p>مجموعة ضخمة من الأذكار والأدعية المأثورة مصنفة حسب الأوقات والمناسبات مع شرح وتوضيح لكل ذكر</p>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="feature-content">
                            <h3>مسبحة رقمية متطورة</h3>
                            <p>مسبحة إلكترونية بتصميم جميل مع إمكانية تحديد العدد وعدة أصوات للسبحة وحفظ التقدم</p>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="feature-content">
                            <h3>تذكير بالأذكار</h3>
                            <p>نظام تذكيرات ذكي يذكرك بالأذكار في أوقاتها المناسبة حسب اختيارك</p>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="feature-content">
                            <h3>تتبع التقدم</h3>
                            <p>إحصائيات وتقارير عن تقدمك في حفظ الأذكار والمسبحة مع جوائز تحفيزية</p>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="feature-content">
                            <h3>مجتمع متكامل</h3>
                            <p>انضم لمجتمع المؤمنين وتنافس مع الأصدقاء في حفظ الأذكار والأدعية</p>
                        </div>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="feature-content">
                            <h3>أوقات الصلاة</h3>
                            <p>مواقيت الصلاة الدقيقة حسب موقعك مع تنبيهات قبل الأذان</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Rosary Section -->
        <section class="rosary-section section" id="rosary-section">
            <div class="container">
                <h2 class="section-title">المسبحة الإلكترونية</h2>
                
                <div class="rosary-container">
                    <div class="rosary-header">
                        <h3>سبح معنا واستغفر ربك</h3>
                    </div>
                    <div class="rosary-body">
                        <div class="rosary-options">
                            <div class="rosary-option active" data-dhikr="سُبْحَانَ اللَّهِ">التسبيح</div>
                            <div class="rosary-option" data-dhikr="الْحَمْدُ لِلَّهِ">الحمد</div>
                            <div class="rosary-option" data-dhikr="اللَّهُ أَكْبَرُ">التكبير</div>
                        </div>
                        
                        <div class="rosary-display">
                            <div id="rosary-text">سُبْحَانَ اللَّهِ</div>
                        </div>
                        
                        <div class="rosary-counter" id="counter">0</div>
                        
                        <div class="rosary-controls">
                            <button class="btn btn-primary" id="count-btn">
                                <i class="fas fa-plus"></i> زيادة
                            </button>
                            <button class="btn btn-outline" id="reset-btn">
                                <i class="fas fa-redo"></i> إعادة
                            </button>
                            <button class="btn btn-outline" id="vibrate-btn">
                                <i class="fas fa-vibrate"></i> اهتزاز
                            </button>
                            <button class="btn btn-outline" id="sound-btn">
                                <i class="fas fa-volume-up"></i> صوت
                            </button>
                        </div>
                        
                        <div class="rosary-presets">
                            <button class="preset-btn" data-count="33">33 تسبيحة</button>
                            <button class="preset-btn" data-count="99">99 تسبيحة</button>
                            <button class="preset-btn" data-count="100">100 تسبيحة</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Adhkar Section -->
        <section class="adhkar-section section" id="adhkar-section">
            <div class="container">
                <h2 class="section-title">أذكار الصباح والمساء</h2>
                
                <div class="adhkar-categories">
                    <button class="category-btn active" data-category="morning">أذكار الصباح</button>
                    <button class="category-btn" data-category="evening">أذكار المساء</button>
                    <button class="category-btn" data-category="sleep">أذكار النوم</button>
                    <button class="category-btn" data-category="wakeup">أذكار الاستيقاظ</button>
                    <button class="category-btn" data-category="prayer">أذكار الصلاة</button>
                </div>
                
                <div class="search-container">
                    <input type="text" id="search-input" class="search-input" placeholder="ابحث عن ذكر أو دعاء...">
                    <button class="search-btn" id="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="adhkar-container" id="adhkar-container">
                    <!-- Adhkar will be loaded here -->
                </div>
                
                <div class="pagination" id="pagination">
                    <!-- Pagination will be generated here -->
                </div>
            </div>
        </section>

        <!-- Favorites Section -->
        <section class="favorites-section section" id="favorites-section">
            <div class="container">
                <div class="favorites-header">
                    <h2 class="section-title">أذكاري المفضلة</h2>
                    <p>مجموعة الأذكار والأدعية التي حفظتها كمفضلة</p>
                </div>
                
                <div class="adhkar-container" id="favorites-container">
                    <!-- Favorites will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section class="profile-section section" id="profile-section">
            <div class="container">
                <h2 class="section-title">الملف الشخصي</h2>
                
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar" id="profile-avatar">م</div>
                        <div class="profile-info">
                            <h2 id="profile-name">محمد أحمد</h2>
                            <p>عضو منذ <span id="join-date">١ يناير ٢٠٢٣</span></p>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="total-dhikr">1,243</div>
                            <div class="stat-label">عدد الأذكار</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-number" id="favorites-count">27</div>
                            <div class="stat-label">الأذكار المفضلة</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-number" id="rosary-count">5,842</div>
                            <div class="stat-label">عدد التسبيحات</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-number" id="streak-days">12</div>
                            <div class="stat-label">أيام متتالية</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>عن الموقع</h3>
                    <p>موقع أذكار المسلم هو موقع متخصص في الأذكار والأدعية الإسلامية الصحيحة، نسعى لنشر السنة الصحيحة وتيسير الوصول إلى الأذكار النبوية.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>روابط سريعة</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-angle-left"></i> الرئيسية</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> الأذكار</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> المسبحة</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> المفضلة</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> الملف الشخصي</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>أقسام الموقع</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-angle-left"></i> أذكار الصباح</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> أذكار المساء</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> أذكار النوم</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> أذكار الصلاة</a></li>
                        <li><a href="#"><i class="fas fa-angle-left"></i> أدعية قرآنية</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>اتصل بنا</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-envelope"></i> info@athkar.com</a></li>
                        <li><a href="#"><i class="fas fa-phone"></i> +966 123 456 789</a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> الرياض، المملكة العربية السعودية</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>جميع الحقوق محفوظة &copy; موقع أذكار المسلم <span id="current-year"></span></p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" id="close-login">&times;</button>
                <h3>تسجيل الدخول إلى حسابك</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="login-email">البريد الإلكتروني</label>
                    <input type="email" id="login-email" class="form-control" placeholder="ادخل بريدك الإلكتروني">
                </div>
                
                <div class="form-group">
                    <label for="login-password">كلمة المرور</label>
                    <input type="password" id="login-password" class="form-control" placeholder="ادخل كلمة المرور">
                    <a href="#" class="forgot-password">نسيت كلمة المرور؟</a>
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" id="login-submit">
                    <span id="login-text">تسجيل الدخول</span>
                    <div class="spinner" id="login-spinner" style="display: none;"></div>
                </button>
                
                <div class="switch-mode">
                    ليس لديك حساب؟ <a href="#" id="switch-to-register">إنشاء حساب جديد</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="register-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" id="close-register">&times;</button>
                <h3>إنشاء حساب جديد</h3>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="register-name">الاسم الكامل</label>
                    <input type="text" id="register-name" class="form-control" placeholder="ادخل اسمك الكامل">
                </div>
                
                <div class="form-group">
                    <label for="register-email">البريد الإلكتروني</label>
                    <input type="email" id="register-email" class="form-control" placeholder="ادخل بريدك الإلكتروني">
                </div>
                
                <div class="form-group">
                    <label for="register-password">كلمة المرور</label>
                    <input type="password" id="register-password" class="form-control" placeholder="اختر كلمة مرور قوية">
                </div>
                
                <div class="form-group">
                    <label for="register-confirm">تأكيد كلمة المرور</label>
                    <input type="password" id="register-confirm" class="form-control" placeholder="أعد كتابة كلمة المرور">
                </div>
                
                <button class="btn btn-primary" style="width: 100%;" id="register-submit">
                    <span id="register-text">إنشاء حساب</span>
                    <div class="spinner" id="register-spinner" style="display: none;"></div>
                </button>
                
                <div class="switch-mode">
                    لديك حساب بالفعل؟ <a href="#" id="switch-to-login">تسجيل الدخول</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ====== Global Variables ======
        let currentUser = null;
        let adhkarData = [];
        const ADHKAR_PER_PAGE = 5;
        let currentPage = 1;
        let totalPages = 1;
        let currentCategory = 'morning';
        let currentSearchTerm = '';
        let favorites = [];
        let rosaryCount = 0;
        let rosaryDhikr = 'سُبْحَانَ اللَّهِ';

        // ====== DOM Elements ======
        const notification = document.getElementById('notification');
        const authButtons = document.getElementById('auth-buttons');
        const userProfile = document.getElementById('user-profile');
        const userAvatar = document.getElementById('user-avatar');
        const username = document.getElementById('username');
        const logoutBtn = document.getElementById('logout-btn');
        const adhkarContainer = document.getElementById('adhkar-container');
        const favoritesContainer = document.getElementById('favorites-container');
        const pagination = document.getElementById('pagination');
        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.nav-link');
        const profileAvatar = document.getElementById('profile-avatar');
        const profileName = document.getElementById('profile-name');
        const joinDate = document.getElementById('join-date');
        const totalDhikr = document.getElementById('total-dhikr');
        const favoritesCount = document.getElementById('favorites-count');
        const rosaryCountStat = document.getElementById('rosary-count');
        const streakDays = document.getElementById('streak-days');

        // ====== Notification System ======
        function showNotification(message, isSuccess = true) {
            notification.textContent = message;
            notification.className = isSuccess ? 'notification show' : 'notification show error';
            
            setTimeout(() => {
                notification.className = 'notification';
            }, 3000);
        }

        // ====== User Authentication System ======
        function hashPassword(password) {
            return CryptoJS.SHA256(password).toString();
        }

        function registerUser(name, email, password) {
            const users = JSON.parse(localStorage.getItem('users')) || {};
            
            if (users[email]) {
                return { success: false, message: 'البريد الإلكتروني مسجل مسبقاً' };
            }
            
            const hashedPassword = hashPassword(password);
            const newUser = {
                name: name,
                email: email,
                password: hashedPassword,
                createdAt: new Date().toISOString(),
                favorites: [],
                rosaryCount: 0,
                totalDhikr: 0,
                streak: 0
            };
            
            users[email] = newUser;
            localStorage.setItem('users', JSON.stringify(users));
            
            return { success: true, user: newUser };
        }

        function loginUser(email, password) {
            const users = JSON.parse(localStorage.getItem('users')) || {};
            const user = users[email];
            
            if (!user) {
                return { success: false, message: 'البريد الإلكتروني غير مسجل' };
            }
            
            const hashedPassword = hashPassword(password);
            if (user.password !== hashedPassword) {
                return { success: false, message: 'كلمة المرور غير صحيحة' };
            }
            
            return { success: true, user: user };
        }

        function updateUserSession(user) {
            currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            updateUIForUser();
            loadFavorites();
            updateProfile();
        }

        function logoutUser() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUIForUser();
            showNotification('تم تسجيل الخروج بنجاح');
            // Switch to home section after logout
            showSection('home-section');
        }

        function updateUIForUser() {
            if (currentUser) {
                authButtons.style.display = 'none';
                userProfile.style.display = 'flex';
                username.textContent = currentUser.name;
                userAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
            } else {
                authButtons.style.display = 'flex';
                userProfile.style.display = 'none';
            }
        }

        // ====== Navigation ======
        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            
            // Update active nav link
            document.querySelector(`.nav-link[data-section="${sectionId}"]`).classList.add('active');
            
            // Special handling for sections
            if (sectionId === 'favorites-section') {
                renderFavorites();
            } else if (sectionId === 'profile-section') {
                updateProfile();
            }
        }

        // ====== Favorites System ======
        function toggleFavorite(dhikrId) {
            if (!currentUser) {
                showNotification('يجب تسجيل الدخول لإضافة إلى المفضلة', false);
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users')) || {};
            const user = users[currentUser.email];
            
            const index = user.favorites.indexOf(dhikrId);
            
            if (index === -1) {
                user.favorites.push(dhikrId);
                showNotification('تمت إضافة الذكر إلى المفضلة');
            } else {
                user.favorites.splice(index, 1);
                showNotification('تمت إزالة الذكر من المفضلة');
            }
            
            // Update localStorage
            users[currentUser.email] = user;
            localStorage.setItem('users', JSON.stringify(users));
            
            // Update current session
            currentUser.favorites = user.favorites;
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // Update UI
            renderAdhkar();
            if (document.getElementById('favorites-section').classList.contains('active')) {
                renderFavorites();
            }
        }

        function loadFavorites() {
            if (currentUser) {
                favorites = currentUser.favorites || [];
            } else {
                favorites = [];
            }
        }

        function isFavorite(dhikrId) {
            return favorites.includes(dhikrId);
        }

        function renderFavorites() {
            favoritesContainer.innerHTML = '';
            
            if (!currentUser) {
                favoritesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-heart-broken"></i>
                        <h3>لم تقم بتسجيل الدخول بعد</h3>
                        <p>سجل الدخول لعرض أذكارك المفضلة</p>
                        <button class="btn btn-primary" id="login-from-favorites" style="margin-top: 1rem;">
                            تسجيل الدخول
                        </button>
                    </div>
                `;
                
                document.getElementById('login-from-favorites').addEventListener('click', () => {
                    document.getElementById('login-modal').classList.add('show');
                });
                return;
            }
            
            if (favorites.length === 0) {
                favoritesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-heart"></i>
                        <h3>لا توجد أذكار في المفضلة</h3>
                        <p>يمكنك إضافة أذكار إلى المفضلة بالنقر على أيقونة القلب</p>
                    </div>
                `;
                return;
            }
            
            favorites.forEach(dhikrId => {
                const dhikr = adhkarData.find(d => d.id === dhikrId);
                if (dhikr) {
                    const dhikrCard = document.createElement('div');
                    dhikrCard.className = 'dhikr-card';
                    dhikrCard.innerHTML = `
                        <div class="dhikr-counter">${dhikr.id}</div>
                        <div class="dhikr-text">${dhikr.text}</div>
                        <div class="dhikr-reference">${dhikr.reference}</div>
                        <div class="dhikr-actions">
                            <button class="action-btn favorite-btn" data-id="${dhikr.id}">
                                <i class="fas fa-heart" style="color: #e74c3c;"></i> إزالة من المفضلة
                            </button>
                            <button class="action-btn share-btn">
                                <i class="fas fa-share-alt"></i> مشاركة
                            </button>
                            <button class="action-btn listen-btn">
                                <i class="fas fa-volume-up"></i> استماع
                            </button>
                        </div>
                    `;
                    favoritesContainer.appendChild(dhikrCard);
                }
            });
            
            // Add event listeners for the favorite buttons in favorites section
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const dhikrId = parseInt(e.currentTarget.dataset.id);
                    toggleFavorite(dhikrId);
                });
            });
            
            // Add event listeners for share and listen buttons
            addDhikrActionListeners(favoritesContainer);
        }

        // ====== Sharing System ======
        function shareDhikr(text) {
            navigator.clipboard.writeText(text).then(() => {
                showNotification('تم نسخ الذكر إلى الحافظة');
            }).catch(err => {
                showNotification('فشل نسخ الذكر: ' + err.message, false);
            });
        }

        // ====== Listening System ======
        function speakDhikr(text) {
            // Check if browser supports speech synthesis
            if (!('speechSynthesis' in window)) {
                showNotification('المتصفح لا يدعم خاصية القراءة الصوتية', false);
                return;
            }
            
            // Create a new utterance
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ar-SA'; // Arabic (Saudi Arabia)
            utterance.rate = 0.9; // Slightly slower than normal
            
            // Show loading state
            const originalText = event.target.innerHTML;
            event.target.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري التحميل';
            event.target.disabled = true;
            
            // Speak the text
            speechSynthesis.speak(utterance);
            
            // Reset button after speech ends
            utterance.onend = function() {
                event.target.innerHTML = originalText;
                event.target.disabled = false;
            };
            
            // Handle errors
            utterance.onerror = function(event) {
                showNotification('حدث خطأ أثناء القراءة: ' + event.error, false);
                event.target.innerHTML = originalText;
                event.target.disabled = false;
            };
        }

        // ====== Rosary System ======
        function updateRosary() {
            const counter = document.getElementById('counter');
            const rosaryText = document.getElementById('rosary-text');
            
            // Load from localStorage if available
            const savedRosary = localStorage.getItem('rosary');
            if (savedRosary) {
                const data = JSON.parse(savedRosary);
                rosaryCount = data.count;
                rosaryDhikr = data.dhikr;
            }
            
            counter.textContent = rosaryCount;
            rosaryText.textContent = rosaryDhikr;
            
            // Update active rosary option
            document.querySelectorAll('.rosary-option').forEach(option => {
                option.classList.remove('active');
                if (option.dataset.dhikr === rosaryDhikr) {
                    option.classList.add('active');
                }
            });
        }

        function saveRosary() {
            const data = {
                count: rosaryCount,
                dhikr: rosaryDhikr
            };
            localStorage.setItem('rosary', JSON.stringify(data));
        }

        // ====== Profile System ======
        function updateProfile() {
            if (!currentUser) {
                return;
            }
            
            profileAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
            profileName.textContent = currentUser.name;
            
            // Format join date
            const joinDateObj = new Date(currentUser.createdAt);
            joinDate.textContent = joinDateObj.toLocaleDateString('ar-SA', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Update stats
            totalDhikr.textContent = currentUser.totalDhikr || 0;
            favoritesCount.textContent = currentUser.favorites ? currentUser.favorites.length : 0;
            rosaryCountStat.textContent = currentUser.rosaryCount || 0;
            streakDays.textContent = currentUser.streak || 0;
        }

        // ====== Adhkar Data ======
        function generateAdhkarData() {
            const categories = ['morning', 'evening', 'sleep', 'wakeup', 'prayer'];
            const adhkar = [];
            
            const morningTexts = [
                'أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَٰهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ',
                'اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ النُّشُورُ',
                'سُبْحَانَ اللَّهِ وَبِحَمْدِهِ: عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ، وَمِدَادَ كَلِمَاتِهِ'
            ];
            
            const eveningTexts = [
                'أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَٰهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ',
                'اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ الْمَصِيرُ',
                'اللَّهُمَّ إِنِّي أَمْسَيْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَٰهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ'
            ];
            
            const sleepTexts = [
                'اللَّهُمَّ قِنِي عَذَابَكَ يَوْمَ تَبْعَثُ عِبَادَكَ',
                'بِاسْمِكَ رَبِّي وَضَعْتُ جَنْبِي، وَبِكَ أَرْفَعُهُ، إِنْ أَمْسَكْتَ نَفْسِي فَارْحَمْهَا، وَإِنْ أَرْسَلْتَهَا فَاحْفَظْهَا بِمَا تَحْفَظُ بِهِ عِبَادَكَ الصَّالِحِينَ',
                'الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَكَفَانَا، وَآوَانَا، فَكَمْ مِمَّنْ لَا كَافِيَ لَهُ وَلَا مُؤْوِيَ'
            ];
            
            const wakeupTexts = [
                'الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا بَعْدَ مَا أَمَاتَنَا، وَإِلَيْهِ النُّشُورُ',
                'لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ، وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، سُبْحَانَ اللَّهِ، وَالْحَمْدُ لِلَّهِ، وَلَا إِلَهَ إِلَّا اللَّهُ، وَاللَّهُ أَكْبَرُ، وَلَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ الْعَلِيِّ الْعَظِيمِ',
                'الْحَمْدُ لِلَّهِ الَّذِي عَافَانِي فِي جَسَدِي، وَرَدَّ عَلَيَّ رُوحِي، وَأَذِنَ لِي بِذِكْرِهِ'
            ];
            
            const prayerTexts = [
                'سُبْحَانَ اللَّهِ، وَالْحَمْدُ لِلَّهِ، وَلَا إِلَهَ إِلَّا اللَّهُ، وَاللَّهُ أَكْبَرُ',
                'اللَّهُمَّ أَنْتَ السَّلَامُ وَمِنْكَ السَّلَامُ، تَبَارَكْتَ يَا ذَا الْجَلَالِ وَالْإِكْرَامِ',
                'أَسْتَغْفِرُ اللَّهَ (ثَلَاثًا) اللَّهُمَّ أَنْتَ السَّلَامُ وَمِنْكَ السَّلَامُ، تَبَارَكْتَ يَا ذَا الْجَلَالِ وَالْإِكْرَامِ'
            ];
            
            for (let i = 1; i <= 100; i++) {
                let category, text;
                
                if (i <= 20) {
                    category = 'morning';
                    text = morningTexts[Math.floor(Math.random() * morningTexts.length)];
                } else if (i <= 40) {
                    category = 'evening';
                    text = eveningTexts[Math.floor(Math.random() * eveningTexts.length)];
                } else if (i <= 60) {
                    category = 'sleep';
                    text = sleepTexts[Math.floor(Math.random() * sleepTexts.length)];
                } else if (i <= 80) {
                    category = 'wakeup';
                    text = wakeupTexts[Math.floor(Math.random() * wakeupTexts.length)];
                } else {
                    category = 'prayer';
                    text = prayerTexts[Math.floor(Math.random() * prayerTexts.length)];
                }
                
                adhkar.push({
                    id: i,
                    text: text,
                    reference: `[ذكر رقم ${i}]`,
                    category: category,
                    timesRead: Math.floor(Math.random() * 1000)
                });
            }
            
            return adhkar;
        }

        function getFilteredAdhkar() {
            let filtered = adhkarData;
            
            // Filter by category
            if (currentCategory) {
                filtered = filtered.filter(adhkar => adhkar.category === currentCategory);
            }
            
            // Filter by search term
            if (currentSearchTerm) {
                const term = currentSearchTerm.toLowerCase();
                filtered = filtered.filter(adhkar => 
                    adhkar.text.toLowerCase().includes(term) || 
                    adhkar.reference.toLowerCase().includes(term)
                );
            }
            
            return filtered;
        }

        function renderAdhkar() {
            const filtered = getFilteredAdhkar();
            totalPages = Math.ceil(filtered.length / ADHKAR_PER_PAGE);
            
            // Calculate start and end index
            const startIndex = (currentPage - 1) * ADHKAR_PER_PAGE;
            const endIndex = startIndex + ADHKAR_PER_PAGE;
            const adhkarToShow = filtered.slice(startIndex, endIndex);
            
            // Clear container
            adhkarContainer.innerHTML = '';
            
            if (adhkarToShow.length === 0) {
                adhkarContainer.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-book-open" style="font-size: 3rem; color: var(--gray-color); margin-bottom: 1rem;"></i>
                        <h3>لا توجد أذكار تطابق بحثك</h3>
                        <p>حاول البحث بكلمات أخرى أو اختر تصنيفاً مختلفاً</p>
                    </div>
                `;
                return;
            }
            
            // Render adhkar
            adhkarToShow.forEach((adhkar) => {
                const isFav = isFavorite(adhkar.id);
                const dhikrCard = document.createElement('div');
                dhikrCard.className = 'dhikr-card';
                dhikrCard.innerHTML = `
                    <div class="dhikr-counter">${adhkar.id}</div>
                    <div class="dhikr-text">${adhkar.text}</div>
                    <div class="dhikr-reference">${adhkar.reference}</div>
                    <div class="dhikr-actions">
                        <button class="action-btn favorite-btn" data-id="${adhkar.id}">
                            <i class="${isFav ? 'fas' : 'far'} fa-heart" style="${isFav ? 'color: #e74c3c;' : ''}"></i> ${isFav ? 'إزالة من المفضلة' : 'إضافة إلى المفضلة'}
                        </button>
                        <button class="action-btn share-btn">
                            <i class="fas fa-share-alt"></i> مشاركة
                        </button>
                        <button class="action-btn listen-btn">
                            <i class="fas fa-volume-up"></i> استماع
                        </button>
                    </div>
                `;
                adhkarContainer.appendChild(dhikrCard);
            });
            
            renderPagination();
            
            // Add event listeners for action buttons
            addDhikrActionListeners(adhkarContainer);
        }

        function addDhikrActionListeners(container) {
            // Favorite buttons
            container.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const dhikrId = parseInt(e.currentTarget.dataset.id);
                    toggleFavorite(dhikrId);
                });
            });
            
            // Share buttons
            container.querySelectorAll('.share-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const dhikrText = e.currentTarget.closest('.dhikr-card').querySelector('.dhikr-text').textContent;
                    shareDhikr(dhikrText);
                });
            });
            
            // Listen buttons
            container.querySelectorAll('.listen-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const dhikrText = e.currentTarget.closest('.dhikr-card').querySelector('.dhikr-text').textContent;
                    speakDhikr(dhikrText);
                });
            });
        }

        function renderPagination() {
            pagination.innerHTML = '';
            
            for (let i = 1; i <= totalPages; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.className = i === currentPage ? 'page-btn active' : 'page-btn';
                pageBtn.textContent = i;
                pageBtn.addEventListener('click', () => {
                    currentPage = i;
                    renderAdhkar();
                });
                pagination.appendChild(pageBtn);
            }
        }

        // ====== Event Listeners ======
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize
            adhkarData = generateAdhkarData();
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Check if user is logged in
            const storedUser = localStorage.getItem('currentUser');
            if (storedUser) {
                currentUser = JSON.parse(storedUser);
                updateUIForUser();
                loadFavorites();
            }
            
            // Load rosary state
            updateRosary();
            
            // Render initial adhkar
            renderAdhkar();
            
            // Mobile menu toggle
            document.getElementById('hamburger').addEventListener('click', () => {
                document.getElementById('nav-menu').classList.toggle('show');
            });
            
            // Navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    showSection(sectionId);
                });
            });
            
            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentCategory = btn.dataset.category;
                    currentPage = 1;
                    renderAdhkar();
                });
            });
            
            // Search functionality
            document.getElementById('search-btn').addEventListener('click', () => {
                currentSearchTerm = document.getElementById('search-input').value;
                currentPage = 1;
                renderAdhkar();
            });
            
            document.getElementById('search-input').addEventListener('keyup', (e) => {
                if (e.key === 'Enter') {
                    currentSearchTerm = document.getElementById('search-input').value;
                    currentPage = 1;
                    renderAdhkar();
                }
            });
            
            // Rosary functionality
            document.getElementById('count-btn').addEventListener('click', () => {
                rosaryCount++;
                document.getElementById('counter').textContent = rosaryCount;
                
                // Rotate through dhikr texts when reaching multiples of 33
                if (rosaryCount % 33 === 0) {
                    if (rosaryDhikr === 'سُبْحَانَ اللَّهِ') {
                        rosaryDhikr = 'الْحَمْدُ لِلَّهِ';
                    } else if (rosaryDhikr === 'الْحَمْدُ لِلَّهِ') {
                        rosaryDhikr = 'اللَّهُ أَكْبَرُ';
                    } else {
                        rosaryDhikr = 'سُبْحَانَ اللَّهِ';
                    }
                    document.getElementById('rosary-text').textContent = rosaryDhikr;
                }
                
                // Update UI
                const counter = document.getElementById('counter');
                counter.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    counter.style.transform = 'scale(1)';
                }, 300);
                
                // Save state
                saveRosary();
                
                // Update user stats if logged in
                if (currentUser) {
                    const users = JSON.parse(localStorage.getItem('users')) || {};
                    const user = users[currentUser.email];
                    
                    user.rosaryCount = (user.rosaryCount || 0) + 1;
                    
                    users[currentUser.email] = user;
                    localStorage.setItem('users', JSON.stringify(users));
                    
                    currentUser.rosaryCount = user.rosaryCount;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    // Update profile if visible
                    if (document.getElementById('profile-section').classList.contains('active')) {
                        updateProfile();
                    }
                }
            });
            
            document.getElementById('reset-btn').addEventListener('click', () => {
                rosaryCount = 0;
                document.getElementById('counter').textContent = rosaryCount;
                saveRosary();
            });
            
            // Rosary options
            document.querySelectorAll('.rosary-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.rosary-option').forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    
                    rosaryDhikr = option.dataset.dhikr;
                    document.getElementById('rosary-text').textContent = rosaryDhikr;
                    
                    saveRosary();
                });
            });
            
            // Rosary presets
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    rosaryCount = parseInt(btn.dataset.count);
                    document.getElementById('counter').textContent = rosaryCount;
                    saveRosary();
                });
            });
            
            // Registration
            document.getElementById('register-submit').addEventListener('click', () => {
                const name = document.getElementById('register-name').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-confirm').value;
                
                if (!name || !email || !password || !confirmPassword) {
                    showNotification('الرجاء ملء جميع الحقول', false);
                    return;
                }
                
                if (password !== confirmPassword) {
                    showNotification('كلمتا المرور غير متطابقتين', false);
                    return;
                }
                
                // Show loading spinner
                document.getElementById('register-text').style.display = 'none';
                document.getElementById('register-spinner').style.display = 'block';
                
                // Simulate API call
                setTimeout(() => {
                    const result = registerUser(name, email, password);
                    if (result.success) {
                        showNotification('تم إنشاء الحساب بنجاح!');
                        document.getElementById('register-modal').classList.remove('show');
                        document.getElementById('login-modal').classList.add('show');
                    } else {
                        showNotification(result.message, false);
                    }
                    
                    // Reset UI
                    document.getElementById('register-text').style.display = 'block';
                    document.getElementById('register-spinner').style.display = 'none';
                }, 1500);
            });
            
            // Login
            document.getElementById('login-submit').addEventListener('click', () => {
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                
                if (!email || !password) {
                    showNotification('الرجاء ملء جميع الحقول', false);
                    return;
                }
                
                // Show loading spinner
                document.getElementById('login-text').style.display = 'none';
                document.getElementById('login-spinner').style.display = 'block';
                
                // Simulate API call
                setTimeout(() => {
                    const result = loginUser(email, password);
                    if (result.success) {
                        updateUserSession(result.user);
                        showNotification('تم تسجيل الدخول بنجاح!');
                        document.getElementById('login-modal').classList.remove('show');
                    } else {
                        showNotification(result.message, false);
                    }
                    
                    // Reset UI
                    document.getElementById('login-text').style.display = 'block';
                    document.getElementById('login-spinner').style.display = 'none';
                }, 1500);
            });
            
            // Logout
            logoutBtn.addEventListener('click', logoutUser);
            
            // Modal functionality
            document.getElementById('login-btn').addEventListener('click', () => {
                document.getElementById('login-modal').classList.add('show');
            });
            
            document.getElementById('register-btn').addEventListener('click', () => {
                document.getElementById('register-modal').classList.add('show');
            });
            
            document.getElementById('close-login').addEventListener('click', () => {
                document.getElementById('login-modal').classList.remove('show');
            });
            
            document.getElementById('close-register').addEventListener('click', () => {
                document.getElementById('register-modal').classList.remove('show');
            });
            
            document.getElementById('switch-to-register').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('login-modal').classList.remove('show');
                document.getElementById('register-modal').classList.add('show');
            });
            
            document.getElementById('switch-to-login').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('register-modal').classList.remove('show');
                document.getElementById('login-modal').classList.add('show');
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === document.getElementById('login-modal')) {
                    document.getElementById('login-modal').classList.remove('show');
                }
                if (e.target === document.getElementById('register-modal')) {
                    document.getElementById('register-modal').classList.remove('show');
                }
            });
            
            // Simulate visitor count updates
            setInterval(() => {
                const currentVisitors = document.getElementById('current-visitors');
                const totalVisitors = document.getElementById('total-visitors');
                
                let currentCount = parseInt(currentVisitors.textContent.replace(/,/g, ''));
                let totalCount = parseInt(totalVisitors.textContent.replace(/,/g, ''));
                
                currentCount += Math.floor(Math.random() * 3);
                totalCount += Math.floor(Math.random() * 5);
                
                currentVisitors.textContent = currentCount.toLocaleString();
                totalVisitors.textContent = totalCount.toLocaleString();
            }, 5000);
        });
    </script>
</body>
</html>
