<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>المسبحة الإلكترونية الذكية</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cairo&display=swap');
  body {
    margin: 0; padding: 0;
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg, #a8dadc, #457b9d);
    color: #1d3557;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    background: #1d3557;
    color: #f1faee;
    padding: 1rem;
    text-align: center;
    font-size: 1.8rem;
    font-weight: 700;
    box-shadow: 0 4px 8px rgba(29, 53, 87, 0.6);
  }
  main {
    flex-grow: 1;
    max-width: 900px;
    margin: 1rem auto 2rem;
    background: #f1faee;
    border-radius: 12px;
    padding: 1rem 2rem 2rem;
    box-shadow: 0 0 20px rgba(29, 53, 87, 0.2);
  }
  .nav-buttons {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  .nav-buttons button {
    background: #457b9d;
    border: none;
    color: #f1faee;
    font-size: 1.1rem;
    padding: 0.6rem 1.2rem;
    border-radius: 30px;
    cursor: pointer;
    transition: background 0.3s ease;
    min-width: 140px;
  }
  .nav-buttons button:hover, .nav-buttons button.active {
    background: #1d3557;
  }
  section {
    display: none;
  }
  section.active {
    display: block;
  }
  .zikr {
    margin-bottom: 1rem;
    background: #a8dadc;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 5px rgba(29,53,87,0.2);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .zikr-text {
    font-size: 1.2rem;
    flex: 1;
    line-height: 1.5;
    margin-left: 1rem;
  }
  .counts {
    display: flex;
    flex-direction: column;
    align-items: center;
    user-select: none;
  }
  .counts .remaining {
    font-size: 1rem;
    color: #457b9dcc;
    margin-bottom: 6px;
  }
  .counts button {
    font-size: 1.2rem;
    background: #457b9d;
    border: none;
    border-radius: 50%;
    width: 34px;
    height: 34px;
    color: #f1faee;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s ease;
  }
  .counts button:active {
    background: #1d3557;
  }
  .counts button.finished {
    background: #6c757d;
    cursor: default;
  }
  footer {
    text-align: center;
    padding: 1rem;
    color: #1d3557cc;
    font-size: 0.9rem;
  }
  /* Preloader styles */
  #preloader {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, #a8dadc, #457b9d);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    flex-direction: column;
  }
  #preloader img {
    max-width: 150px;
    margin-bottom: 15px;
  }
  #preloader p {
    color: #f1faee;
    font-size: 1.3rem;
    font-weight: 600;
  }
  /* Preloader hidden */
  .hidden {
    display: none !important;
  }
  /* Audio controls style */
  audio {
    display: none;
  }
</style>
</head>
<body>

<div id="preloader" aria-label="جارٍ تحميل الموقع">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/03/Al-Masjid_an-Nabawi_Medina_Mosque_Logo.svg/120px-Al-Masjid_an-Nabawi_Medina_Mosque_Logo.svg.png" alt="مسجد" />
  <p>جاري تحميل الموقع ...</p>
</div>

<header>المسبحة الإلكترونية الذكية</header>

<main>
  <nav class="nav-buttons" role="navigation" aria-label="أقسام الأذكار">
    <button class="active" data-target="morning" aria-pressed="true">أذكار الصباح</button>
    <button data-target="evening" aria-pressed="false">أذكار المساء</button>
    <button data-target="afterPrayer" aria-pressed="false">أذكار بعد الصلاة</button>
    <button data-target="sleep" aria-pressed="false">أذكار النوم</button>
    <button data-target="misbaha" aria-pressed="false">المسبحة الإلكترونية</button>
  </nav>

  <section id="morning" class="active" aria-label="أذكار الصباح" tabindex="0"></section>
  <section id="evening" aria-label="أذكار المساء" tabindex="0"></section>
  <section id="afterPrayer" aria-label="أذكار بعد الصلاة" tabindex="0"></section>
  <section id="sleep" aria-label="أذكار النوم" tabindex="0"></section>
  <section id="misbaha" aria-label="المسبحة الإلكترونية" tabindex="0"></section>
</main>

<footer>جميع الحقوق محفوظة © 2025</footer>

<!-- أصوات الشيخ ياسر الدوسري -->
<audio id="audioFatiha" src="https://cdn.islamic.network/quran/audio/128/ar.yasser_dosari/1.mp3" preload="auto"></audio>
<audio id="audioAyatKursi" src="https://cdn.islamic.network/quran/audio/128/ar.yasser_dosari/2.mp3" preload="auto"></audio>
<audio id="audioMuawadhat" src="https://cdn.islamic.network/quran/audio/128/ar.yasser_dosari/3.mp3" preload="auto"></audio>
<audio id="audioKhatim" src="https://cdn.islamic.network/quran/audio/128/ar.yasser_dosari/4.mp3" preload="auto"></audio>

<script>
  // إخفاء شاشة التحميل عند انتهاء التحميل
  window.addEventListener('load', () => {
    document.getElementById('preloader').classList.add('hidden');
  });

  // تحكم في التنقل بين الأقسام
  const buttons = document.querySelectorAll('.nav-buttons button');
  const sections = document.querySelectorAll('main section');
  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      buttons.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-pressed', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-pressed', 'true');

      const target = btn.getAttribute('data-target');
      sections.forEach(s => s.classList.remove('active'));
      document.getElementById(target).classList.add('active');
    });
  });

  // بيانات الأذكار مع عدد التكرارات وأصوات للقراءة
  const azkarData = {
    morning: [
      {
        text: 'اللّهُ لا إِلٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ',
        times: 1,
        audioId: 'audioAyatKursi'
      },
      {
        text: 'سُبْحَانَ اللَّهِ وَبِحَمْدِهِ',
        times: 100
      },
      {
        text: 'أَسْتَغْفِرُ اللَّهَ',
        times: 100
      },
      {
        text: 'اللّهُ أَكْبَرُ',
        times: 100
      },
      {
        text: 'لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير',
        times: 1,
        audioId: 'audioFatiha'
      }
      // يمكن إضافة المزيد هنا
    ],
    evening: [
      {
        text: 'اللّهُ لا إِلٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ',
        times: 1,
        audioId: 'audioAyatKursi'
      },
      {
        text: 'سُبْحَانَ اللَّهِ وَبِحَمْدِهِ',
        times: 100
      }
      // يمكن إضافة المزيد هنا
    ],
    afterPrayer: [
      {
        text: 'أستغفر الله',
        times: 3
      },
      {
        text: 'اللّهُ أَكْبَرُ',
        times: 3
      }
      // يمكن إضافة المزيد هنا
    ],
    sleep: [
      {
        text: 'بسمك ربي وضعت جنبي',
        times: 1
      },
      {
        text: 'اللّهُ لا إِلٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ',
        times: 1,
        audioId: 'audioAyatKursi'
      }
      // يمكن إضافة المزيد هنا
    ],
    misbaha: [
      {
        text: 'سُبْحَانَ اللَّهِ',
        times: 33
      },
      {
        text: 'الْحَمْدُ لِلَّهِ',
        times: 33
      },
      {
        text: 'اللّهُ أَكْبَرُ',
        times: 34
      }
    ]
  };

  // إنشاء عنصر ذكر مع عداد قابل للنقر
  function createZikrItem(zikr) {
    const container = document.createElement('div');
    container.className = 'zikr';

    const text = document.createElement('div');
    text.className = 'zikr-text';
    text.textContent = zikr.text;

    const counts = document.createElement('div');
    counts.className = 'counts';

    const remaining = document.createElement('div');
    remaining.className = 'remaining';
    remaining.textContent = zikr.times;

    const button = document.createElement('button');
    button.textContent = '-';
    button.title = 'إنقاص العدد';
    button.disabled = zikr.times === 0;

    button.addEventListener('click', () => {
      let current = Number(remaining.textContent);
      if (current > 0) {
        current--;
        remaining.textContent = current;
        if (current === 0) {
          button.disabled = true;
          button.classList.add('finished');
          // تشغيل الصوت إذا موجود
          if (zikr.audioId) {
            const audio = document.getElementById(zikr.audioId);
            if(audio){
              audio.currentTime = 0;
              audio.play();
            }
          }
        }
      }
    });

    counts.appendChild(remaining);
    counts.appendChild(button);

    container.appendChild(text);
    container.appendChild(counts);

    return container;
  }

  // تحميل الأذكار في القسم المحدد
  function loadAzkar(sectionId, azkarList) {
    const section = document.getElementById(sectionId);
    section.innerHTML = '';
    azkarList.forEach(zikr => {
      section.appendChild(createZikrItem(zikr));
    });
  }

  // تحميل جميع الأقسام
  for(const sectionId in azkarData) {
    loadAzkar(sectionId, azkarData[sectionId]);
  }
</script>

</body>
</html>
