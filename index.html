<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أذكار المسلم - موقع أذكار احترافي</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
        :root {
            --primary-color: #1a5d38;
            --secondary-color: #2e8b57;
            --accent-color: #d4af37;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --gray-color: #6c757d;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --card-radius: 16px;
            --prayer-active-bg: linear-gradient(135deg, #1a5d38 0%, #2e8b57 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f0f9f4 0%, #e0f3e8 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--accent-color);
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            padding: 0.5rem;
            border-radius: 4px;
            transition: var(--transition);
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .auth-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: var(--dark-color);
        }

        .btn-primary:hover {
            background-color: #c19d0c;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .btn-small {
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
        }

        .hamburger {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: white;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark-color);
        }

        /* Hero */
        .hero {
            padding: 4rem 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%231a5d38" fill-opacity="0.05" d="M0,64L48,80C96,96,192,128,288,128C384,128,480,96,576,106.7C672,117,768,171,864,170.7C960,171,1056,117,1152,112C1248,107,1344,149,1392,170.7L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
            z-index: -1;
        }

        .hero h2 {
            font-size: 2.8rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: var(--gray-color);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }

        .feature-card {
            background: white;
            border-radius: var(--card-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }

        .feature-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .feature-content h3 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .feature-content p {
            flex: 1;
            margin-bottom: 1rem;
            text-align: center;
        }

        .feature-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            margin-top: auto;
        }

        .feature-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Daily Inspiration */
        .daily-inspiration {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 2rem;
            border-radius: var(--card-radius);
            text-align: center;
            margin: 2rem auto;
            max-width: 800px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .daily-inspiration::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,261.3C672,256,768,224,864,224C960,224,1056,256,1152,261.3C1248,267,1344,245,1392,234.7L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
            z-index: 0;
        }

        .daily-inspiration > * {
            position: relative;
            z-index: 1;
        }

        .daily-inspiration h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
        }

        .inspiration-text {
            font-size: 1.4rem;
            font-style: italic;
            margin: 1rem 0;
            line-height: 1.8;
        }

        .inspiration-reference {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Back Button */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 10;
            transition: var(--transition);
        }
        
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-3px);
        }

        /* Sections */
        .section {
            display: none;
            padding: 4rem 0;
            min-height: 100vh;
            position: relative;
        }
        
        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Adhkar Section */
        .adhkar-section {
            background: linear-gradient(135deg, #f0f9f4 0%, #e0f3e8 100%);
        }
        
        .adhkar-header {
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .adhkar-categories {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .category-btn {
            padding: 0.8rem 1.5rem;
            background-color: white;
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            color: var(--primary-color);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .category-btn.active, .category-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .adhkar-container {
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            max-height: 500px;
            overflow-y: auto;
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .dhikr-card {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            transition: var(--transition);
            animation: fadeIn 0.5s ease;
            border-radius: 10px;
            margin-bottom: 1rem;
            position: relative;
        }

        .dhikr-card:last-child {
            border-bottom: none;
        }

        .dhikr-card:hover {
            background-color: #f8f9fa;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .dhikr-text {
            font-size: 1.4rem;
            color: var(--dark-color);
            line-height: 1.8;
            margin-bottom: 1rem;
            text-align: center;
        }

        .dhikr-reference {
            color: var(--gray-color);
            font-style: italic;
            text-align: left;
        }

        .dhikr-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--gray-color);
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .action-btn:hover {
            background-color: #f0f9f4;
            color: var(--primary-color);
        }

        .action-btn.saved {
            color: var(--accent-color);
        }

        .dhikr-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: var(--secondary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        /* Rosary Section */
        .rosary-section {
            background: linear-gradient(135deg, #f0f9f4 0%, #e0f3e8 100%);
        }
        
        .rosary-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .rosary-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: relative;
        }
        
        .rosary-body {
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }
        
        .rosary-display {
            font-size: 5rem;
            color: var(--primary-color);
            margin: 1rem 0;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.3;
        }
        
        .rosary-counter {
            font-size: 3rem;
            font-weight: 700;
            color: var(--secondary-color);
            background: #f0f9f4;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 5px solid var(--primary-color);
            transition: transform 0.3s ease;
        }
        
        .rosary-controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .rosary-presets {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 1rem;
        }
        
        .preset-btn {
            padding: 0.5rem 1rem;
            background-color: #e9ecef;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }
        
        .preset-btn:hover {
            background-color: var(--secondary-color);
            color: white;
        }
        
        /* Prayer Times Section */
        .prayer-section {
            background: linear-gradient(135deg, #f5f7ff 0%, #e8ebfa 100%);
        }
        
        .prayer-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .prayer-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 1.5rem;
            text-align: center;
        }
        
        .prayer-body {
            padding: 2rem;
        }
        
        .prayer-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .city-selector {
            margin-bottom: 2rem;
        }
        
        .city-selector label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .city-selector select {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }
        
        .prayer-times {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .prayer-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }
        
        .prayer-card.active {
            background: var(--prayer-active-bg);
            color: white;
        }
        
        .prayer-card.active .prayer-name,
        .prayer-card.active .prayer-time {
            color: white;
        }
        
        .prayer-icon {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .prayer-card.active .prayer-icon {
            color: white;
        }
        
        .prayer-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .prayer-time {
            font-size: 1.4rem;
            font-weight: 700;
        }
        
        .prayer-next {
            position: absolute;
            top: -10px;
            right: -10px;
            background: var(--accent-color);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* Qibla Compass */
        .qibla-compass {
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            text-align: center;
        }
        
        .compass-container {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 2rem auto;
        }
        
        .compass-circle {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }
        
        .compass-needle {
            position: absolute;
            width: 10px;
            height: 120px;
            background: #e74c3c;
            top: 50%;
            left: 50%;
            transform-origin: bottom;
            transform: translate(-50%, -100%) rotate(0deg);
            border-radius: 5px 5px 0 0;
            z-index: 10;
        }
        
        .compass-direction {
            position: absolute;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .north { top: 5px; left: 50%; transform: translateX(-50%); }
        .east { top: 50%; right: 5px; transform: translateY(-50%); }
        .south { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .west { top: 50%; left: 5px; transform: translateY(-50%); }
        
        .qibla-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23d4af37"><path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/></svg>') no-repeat center;
            background-size: contain;
            transform: translate(-50%, -50%);
        }
        
        .qibla-angle {
            margin-top: 1rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .notification-section {
            margin-top: 2rem;
            background: #f0f9f4;
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .notification-btn {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 1rem;
        }
        
        .notification-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* User Section */
        .user-section {
            background: linear-gradient(135deg, #f5f7ff 0%, #e8ebfa 100%);
        }
        
        .user-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            padding: 2rem;
        }
        
        .auth-forms {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .auth-form {
            flex: 1;
            background: #f8f9fa;
            border-radius: var(--card-radius);
            padding: 2rem;
            box-shadow: var(--shadow);
        }
        
        .auth-form h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .form-group input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .admin-section {
            display: none;
        }
        
        .admin-panel {
            background: white;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-top: 2rem;
        }
        
        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .users-table th, .users-table td {
            padding: 1rem;
            border: 1px solid #eee;
            text-align: center;
        }
        
        .users-table th {
            background-color: #f8f9fa;
            color: var(--primary-color);
        }
        
        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--dark-color) 0%, #23272b 100%);
            color: white;
            padding: 3rem 0 1.5rem;
            margin-top: 3rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            position: relative;
            padding-bottom: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .footer-column h3::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--accent-color);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: var(--accent-color);
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background-color: var(--accent-color);
            color: var(--dark-color);
            transform: translateY(-3px);
        }

        .copyright {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 0.9rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            border-radius: var(--card-radius);
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Share Modal */
        .share-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .share-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }
        
        .share-btn:hover {
            background: #e9ecef;
        }
        
        .share-btn i {
            font-size: 1.8rem;
        }
        
        .facebook-btn i { color: #3b5998; }
        .instagram-btn i { color: #e1306c; }
        .whatsapp-btn i { color: #25d366; }
        .telegram-btn i { color: #0088cc; }
        
        /* Ads */
        .ad-container {
            background: #f8f9fa;
            border-radius: var(--card-radius);
            padding: 1rem;
            margin: 2rem 0;
            text-align: center;
            border: 1px dashed var(--accent-color);
        }
        
        .ad-title {
            color: var(--accent-color);
            margin-bottom: 0.5rem;
        }
        
        .ad-content {
            color: var(--gray-color);
            font-style: italic;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            nav ul {
                gap: 1rem;
            }
            
            .hero h2 {
                font-size: 2.3rem;
            }
            
            .prayer-grid {
                grid-template-columns: 1fr;
            }
            
            .auth-forms {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            
            nav ul {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--primary-color);
                flex-direction: column;
                padding: 1rem 0;
                box-shadow: var(--shadow);
            }
            
            nav ul.show {
                display: flex;
            }
            
            .header-container {
                flex-wrap: wrap;
            }
            
            .auth-buttons {
                margin-left: auto;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .rosary-display {
                font-size: 3.5rem;
            }
        }

        @media (max-width: 576px) {
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .dhikr-text {
                font-size: 1.2rem;
            }
            
            .adhkar-categories {
                gap: 0.5rem;
            }
            
            .category-btn {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-pray"></i>
                <h1>أذكار المسلم</h1>
            </div>
            
            <nav>
                <button class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
                <ul id="nav-menu">
                    <li><a href="#" class="nav-link active" data-section="home-section">الرئيسية</a></li>
                    <li><a href="#" class="nav-link" data-section="adhkar-section">الأذكار</a></li>
                    <li><a href="#" class="nav-link" data-section="rosary-section">المسبحة</a></li>
                    <li><a href="#" class="nav-link" data-section="prayer-section">أوقات الصلاة</a></li>
                    <li><a href="#" class="nav-link" data-section="user-section">حسابي</a></li>
                </ul>
            </nav>
            
            <div class="auth-buttons" id="auth-buttons">
                <button class="btn btn-outline" id="login-btn">
                    <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
                </button>
                <button class="btn btn-primary" id="register-btn">
                    <i class="fas fa-user-plus"></i> إنشاء حساب
                </button>
            </div>
            
            <div class="user-profile" id="user-profile" style="display:none;">
                <div class="user-avatar" id="user-avatar">م</div>
                <div id="username">محمد</div>
                <button class="btn btn-outline" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Home Section -->
        <section class="hero section active" id="home-section">
            <div class="container">
                <h2>موقع أذكار المسلم الشامل</h2>
                <p>استذكر ربك في كل وقت وحين مع أكبر مجموعة من الأذكار والأدعية المأثورة مصنفة ومرتبة لسهولة الوصول إليها</p>
                
                <div class="features-grid">
                    <div class="feature-card" data-section="adhkar-section">
                        <div class="feature-icon">
                            <i class="fas fa-book-quran"></i>
                        </div>
                        <div class="feature-content">
                            <h3>الأذكار</h3>
                            <p>مجموعة ضخمة من الأذكار والأدعية المأثورة مصنفة حسب الأوقات والمناسبات</p>
                            <div class="feature-btn">تصفح الأذكار</div>
                        </div>
                    </div>
                    
                    <div class="feature-card" data-section="rosary-section">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <div class="feature-content">
                            <h3>المسبحة</h3>
                            <p>مسبحة إلكترونية بتصميم جميل مع إمكانية تحديد العدد وحفظ التقدم</p>
                            <div class="feature-btn">ابدأ الآن</div>
                        </div>
                    </div>
                    
                    <div class="feature-card" data-section="prayer-section">
                        <div class="feature-icon">
                            <i class="fas fa-mosque"></i>
                        </div>
                        <div class="feature-content">
                            <h3>أوقات الصلاة</h3>
                            <p>مواقيت الصلاة الدقيقة حسب موقعك مع تنبيهات قبل الأذان</p>
                            <div class="feature-btn">عرض الأوقات</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ad Space -->
                <div class="ad-container">
                    <h3 class="ad-title">مساحة إعلانية</h3>
                    <p class="ad-content">هذه مساحة مخصصة للإعلانات - للإعلان على موقعنا راسلنا على islamalsharqi231@gmail.com</p>
                </div>
            </div>
        </section>
        
        <!-- Daily Inspiration -->
        <div class="container">
            <div class="daily-inspiration">
                <h3>وحي اليوم</h3>
                <div class="inspiration-text">
                    "وَمَا خَلَقْتُ الْجِنَّ وَالْإِنسَ إِلَّا لِيَعْبُدُونِ"
                </div>
                <div class="inspiration-reference">
                    الذاريات - الآية 56
                </div>
            </div>
        </div>

        <!-- Adhkar Section -->
        <section class="adhkar-section section" id="adhkar-section">
            <div class="back-button" data-section="home-section">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="container">
                <div class="adhkar-header">
                    <h2>الأذكار اليومية</h2>
                    <p>مجموعة شاملة من الأذكار والأدعية المأثورة عن النبي صلى الله عليه وسلم</p>
                </div>
                
                <div class="adhkar-categories">
                    <button class="category-btn active" data-category="morning">أذكار الصباح</button>
                    <button class="category-btn" data-category="evening">أذكار المساء</button>
                    <button class="category-btn" data-category="sleep">أذكار النوم</button>
                    <button class="category-btn" data-category="wakeup">أذكار الاستيقاظ</button>
                    <button class="category-btn" data-category="prayer">أذكار الصلاة</button>
                    <button class="category-btn" data-category="home">أذكار المنزل</button>
                    <button class="category-btn" data-category="food">أذكار الطعام</button>
                </div>
                
                <div class="adhkar-container" id="adhkar-container">
                    <!-- Adhkar will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Rosary Section -->
        <section class="rosary-section section" id="rosary-section">
            <div class="back-button" data-section="home-section">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="container">
                <h2 class="adhkar-header">المسبحة الإلكترونية</h2>
                
                <div class="rosary-container">
                    <div class="rosary-header">
                        <h3>سبح معنا واستغفر ربك</h3>
                    </div>
                    <div class="rosary-body">
                        <div class="rosary-display">
                            <div id="rosary-text">سُبْحَانَ اللَّهِ</div>
                        </div>
                        
                        <div class="rosary-counter" id="counter">0</div>
                        
                        <div class="rosary-controls">
                            <button class="btn btn-primary" id="count-btn">
                                <i class="fas fa-plus"></i> زيادة
                            </button>
                            <button class="btn btn-outline" id="reset-btn">
                                <i class="fas fa-redo"></i> إعادة
                            </button>
                            <button class="btn btn-outline" id="vibrate-btn">
                                <i class="fas fa-vibrate"></i> اهتزاز
                            </button>
                            <button class="btn btn-outline" id="sound-btn">
                                <i class="fas fa-volume-up"></i> صوت
                            </button>
                        </div>
                        
                        <div class="rosary-presets">
                            <button class="preset-btn" data-count="33">33 تسبيحة</button>
                            <button class="preset-btn" data-count="99">99 تسبيحة</button>
                            <button class="preset-btn" data-count="100">100 تسبيحة</button>
                        </div>
                    </div>
                </div>
                
                <!-- Ad Space -->
                <div class="ad-container">
                    <h3 class="ad-title">مساحة إعلانية</h3>
                    <p class="ad-content">هذه مساحة مخصصة للإعلانات - للإعلان على موقعنا راسلنا على islamalsharqi231@gmail.com</p>
                </div>
            </div>
        </section>

        <!-- Prayer Times Section -->
        <section class="prayer-section section" id="prayer-section">
            <div class="back-button" data-section="home-section">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="container">
                <div class="prayer-container">
                    <div class="prayer-header">
                        <h3>أوقات الصلاة في الأردن</h3>
                    </div>
                    <div class="prayer-body">
                        <div class="prayer-grid">
                            <div>
                                <div class="city-selector">
                                    <label for="city-select">اختر مدينتك:</label>
                                    <select id="city-select">
                                        <option value="amman">عمان</option>
                                        <option value="irbid">إربد</option>
                                        <option value="zarqa">الزرقاء</option>
                                        <option value="mafraq">المفرق</option>
                                        <option value="ajloun">عجلون</option>
                                        <option value="jerash">جرش</option>
                                        <option value="maan">معان</option>
                                        <option value="salt">السلط</option>
                                        <option value="tafilah">الطفيلة</option>
                                        <option value="madaba">مادبا</option>
                                        <option value="karak">الكرك</option>
                                        <option value="aqaba">العقبة</option>
                                    </select>
                                </div>
                                
                                <div class="prayer-times">
                                    <div class="prayer-card active">
                                        <div class="prayer-next">التالي</div>
                                        <div class="prayer-icon"><i class="fas fa-moon"></i></div>
                                        <div class="prayer-name">الفجر</div>
                                        <div class="prayer-time" id="fajr">3:46 ص</div>
                                    </div>
                                    <div class="prayer-card">
                                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                                        <div class="prayer-name">الشروق</div>
                                        <div class="prayer-time" id="sunrise">5:31 ص</div>
                                    </div>
                                    <div class="prayer-card">
                                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                                        <div class="prayer-name">الظهر</div>
                                        <div class="prayer-time" id="dhuhr">12:40 م</div>
                                    </div>
                                    <div class="prayer-card">
                                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                                        <div class="prayer-name">العصر</div>
                                        <div class="prayer-time" id="asr">4:22 م</div>
                                    </div>
                                    <div class="prayer-card">
                                        <div class="prayer-icon"><i class="fas fa-sun"></i></div>
                                        <div class="prayer-name">المغرب</div>
                                        <div class="prayer-time" id="maghrib">7:49 م</div>
                                    </div>
                                    <div class="prayer-card">
                                        <div class="prayer-icon"><i class="fas fa-moon"></i></div>
                                        <div class="prayer-name">العشاء</div>
                                        <div class="prayer-time" id="isha">9:19 م</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="qibla-compass">
                                <h3>اتجاه القبلة</h3>
                                <p>حدد اتجاه الكعبة المشرفة في مدينتك</p>
                                
                                <div class="compass-container">
                                    <div class="compass-circle">
                                        <div class="north">ش</div>
                                        <div class="east">ق</div>
                                        <div class="south">ج</div>
                                        <div class="west">غ</div>
                                        <div class="qibla-indicator"></div>
                                        <div class="qibla-label" id="qibla-label">القبلة</div>
                                    </div>
                                    <div class="compass-needle" id="compass-needle"></div>
                                </div>
                                
                                <div class="qibla-angle">
                                    زاوية القبلة: <span id="qibla-angle">135°</span>
                                </div>
                                
                                <div class="notification-section">
                                    <p>تفعيل تنبيهات الأذان قبل 10 دقائق من دخول وقت الصلاة</p>
                                    <button class="notification-btn" id="notification-btn">
                                        <i class="fas fa-bell"></i> تفعيل التنبيهات
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ad Space -->
                <div class="ad-container">
                    <h3 class="ad-title">مساحة إعلانية</h3>
                    <p class="ad-content">هذه مساحة مخصصة للإعلانات - للإعلان على موقعنا راسلنا على islamalsharqi231@gmail.com</p>
                </div>
            </div>
        </section>
        
        <!-- User Section -->
        <section class="user-section section" id="user-section">
            <div class="back-button" data-section="home-section">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="container">
                <div class="user-container">
                    <h2 class="adhkar-header">حساب المستخدم</h2>
                    
                    <div class="auth-forms">
                        <div class="auth-form">
                            <h3>تسجيل الدخول</h3>
                            <div class="form-group">
                                <label for="login-email">البريد الإلكتروني</label>
                                <input type="email" id="login-email" placeholder="أدخل بريدك الإلكتروني">
                            </div>
                            <div class="form-group">
                                <label for="login-password">كلمة المرور</label>
                                <input type="password" id="login-password" placeholder="أدخل كلمة المرور">
                            </div>
                            <button class="btn btn-primary" id="login-form-btn">تسجيل الدخول</button>
                            <p style="margin-top: 1rem; text-align: center;">
                                <a href="#" id="forgot-password" style="color: var(--primary-color);">نسيت كلمة المرور؟</a>
                            </p>
                        </div>
                        
                        <div class="auth-form">
                            <h3>إنشاء حساب جديد</h3>
                            <div class="form-group">
                                <label for="register-name">الاسم الكامل</label>
                                <input type="text" id="register-name" placeholder="أدخل اسمك الكامل">
                            </div>
                            <div class="form-group">
                                <label for="register-email">البريد الإلكتروني</label>
                                <input type="email" id="register-email" placeholder="أدخل بريدك الإلكتروني">
                            </div>
                            <div class="form-group">
                                <label for="register-password">كلمة المرور</label>
                                <input type="password" id="register-password" placeholder="أنشئ كلمة مرور قوية">
                            </div>
                            <button class="btn btn-primary" id="register-form-btn">إنشاء حساب</button>
                        </div>
                    </div>
                    
                    <div class="admin-section" id="admin-section">
                        <h3>لوحة التحكم للمشرف</h3>
                        <div class="admin-panel">
                            <h4>المستخدمون المسجلون</h4>
                            <table class="users-table">
                                <thead>
                                    <tr>
                                        <th>الاسم</th>
                                        <th>البريد الإلكتروني</th>
                                        <th>الدور</th>
                                    </tr>
                                </thead>
                                <tbody id="users-list">
                                    <!-- Users will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h3>عن الموقع</h3>
                    <p>موقع أذكار المسلم هو موقع متخصص في الأذكار والأدعية الإسلامية الصحيحة، نسعى لنشر السنة الصحيحة وتيسير الوصول إلى الأذكار النبوية.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>روابط سريعة</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-section="home-section"><i class="fas fa-angle-left"></i> الرئيسية</a></li>
                        <li><a href="#" data-section="adhkar-section"><i class="fas fa-angle-left"></i> الأذكار</a></li>
                        <li><a href="#" data-section="rosary-section"><i class="fas fa-angle-left"></i> المسبحة</a></li>
                        <li><a href="#" data-section="prayer-section"><i class="fas fa-angle-left"></i> أوقات الصلاة</a></li>
                        <li><a href="#" data-section="user-section"><i class="fas fa-angle-left"></i> حسابي</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>أقسام الموقع</h3>
                    <ul class="footer-links">
                        <li><a href="#" data-category="morning"><i class="fas fa-angle-left"></i> أذكار الصباح</a></li>
                        <li><a href="#" data-category="evening"><i class="fas fa-angle-left"></i> أذكار المساء</a></li>
                        <li><a href="#" data-category="sleep"><i class="fas fa-angle-left"></i> أذكار النوم</a></li>
                        <li><a href="#" data-category="prayer"><i class="fas fa-angle-left"></i> أذكار الصلاة</a></li>
                        <li><a href="#" data-category="home"><i class="fas fa-angle-left"></i> أذكار المنزل</a></li>
                        <li><a href="#" data-category="food"><i class="fas fa-angle-left"></i> أذكار الطعام</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>اتصل بنا</h3>
                    <ul class="footer-links">
                        <li><a href="mailto:islamalsharqi231@gmail.com"><i class="fas fa-envelope"></i> islamalsharqi231@gmail.com</a></li>
                        <li><a href="#"><i class="fas fa-phone"></i> +962 79 000 0000</a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> عمان، الأردن</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>جميع الحقوق محفوظة &copy; موقع أذكار المسلم <span id="current-year"></span></p>
            </div>
        </div>
    </footer>

    <!-- Share Modal -->
    <div class="modal" id="share-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>مشاركة الذكر</h3>
                <button class="close-modal" id="close-share-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>اختر الطريقة التي تريد مشاركة الذكر بها:</p>
                <div class="share-options">
                    <button class="share-btn facebook-btn">
                        <i class="fab fa-facebook"></i>
                        <span>فيسبوك</span>
                    </button>
                    <button class="share-btn instagram-btn">
                        <i class="fab fa-instagram"></i>
                        <span>إنستغرام</span>
                    </button>
                    <button class="share-btn whatsapp-btn">
                        <i class="fab fa-whatsapp"></i>
                        <span>واتساب</span>
                    </button>
                    <button class="share-btn telegram-btn">
                        <i class="fab fa-telegram"></i>
                        <span>تيليجرام</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio for Adhan -->
    <audio id="adhan-audio" preload="auto">
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <!-- Audio for Dhikr -->
    <audio id="dhikr-audio" preload="auto">
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" type="audio/mpeg">
    </audio>

    <script>
        // ====== Firebase Configuration ======
        const firebaseConfig = {
            apiKey: "AIzaSyBNBDSL01Flqv7iLIiPenuQ-eDQ9_ZxQD4",
            authDomain: "athkar-almuslim-3b9bf.firebaseapp.com",
            projectId: "athkar-almuslim-3b9bf",
            storageBucket: "athkar-almuslim-3b9bf.appspot.com",
            messagingSenderId: "1012115796818",
            appId: "1:1012115796818:web:108f7ce679c46b1681008b"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // ====== Global Variables ======
        let currentCategory = 'morning';
        let rosaryCount = 0;
        let rosaryDhikr = 'سُبْحَانَ اللَّهِ';
        const prayerTimes = {
            amman: { fajr: "3:46 ص", sunrise: "5:31 ص", dhuhr: "12:40 م", asr: "4:22 م", maghrib: "7:49 م", isha: "9:19 م" },
            irbid: { fajr: "3:42 ص", sunrise: "5:28 ص", dhuhr: "12:36 م", asr: "4:18 م", maghrib: "7:45 م", isha: "9:15 م" },
            zarqa: { fajr: "3:44 ص", sunrise: "5:30 ص", dhuhr: "12:38 م", asr: "4:20 م", maghrib: "7:47 م", isha: "9:17 م" },
            mafraq: { fajr: "3:40 ص", sunrise: "5:26 ص", dhuhr: "12:34 م", asr: "4:16 م", maghrib: "7:43 م", isha: "9:13 م" },
            ajloun: { fajr: "3:43 ص", sunrise: "5:29 ص", dhuhr: "12:37 م", asr: "4:19 م", maghrib: "7:46 م", isha: "9:16 م" },
            jerash: { fajr: "3:44 ص", sunrise: "5:30 ص", dhuhr: "12:38 م", asr: "4:20 م", maghrib: "7:47 م", isha: "9:17 م" },
            maan: { fajr: "3:50 ص", sunrise: "5:36 ص", dhuhr: "12:44 م", asr: "4:26 م", maghrib: "7:53 م", isha: "9:23 م" },
            salt: { fajr: "3:45 ص", sunrise: "5:31 ص", dhuhr: "12:39 م", asr: "4:21 م", maghrib: "7:48 م", isha: "9:18 م" },
            tafilah: { fajr: "3:48 ص", sunrise: "5:34 ص", dhuhr: "12:42 م", asr: "4:24 م", maghrib: "7:51 م", isha: "9:21 م" },
            madaba: { fajr: "3:46 ص", sunrise: "5:32 ص", dhuhr: "12:40 م", asr: "4:22 م", maghrib: "7:49 م", isha: "9:19 م" },
            karak: { fajr: "3:47 ص", sunrise: "5:33 ص", dhuhr: "12:41 م", asr: "4:23 م", maghrib: "7:50 م", isha: "9:20 م" },
            aqaba: { fajr: "4:00 ص", sunrise: "5:46 ص", dhuhr: "12:54 م", asr: "4:36 م", maghrib: "8:03 م", isha: "9:33 م" }
        };

        // ====== Adhkar Data ======
        const adhkarData = {
            morning: [
                {id: 1, text: "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَٰهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ", reference: "رواه مسلم"},
                {id: 2, text: "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ النُّشُورُ", reference: "رواه الترمذي"},
                {id: 3, text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ: عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ، وَمِدَادَ كَلِمَاتِهِ", reference: "رواه مسلم"},
                {id: 4, text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ عِلْمًا نَافِعًا، وَرِزْقًا طَيِّبًا، وَعَمَلًا مُتَقَبَّلًا", reference: "رواه ابن ماجه"},
                {id: 5, text: "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ", reference: "القرآن الكريم - سورة التوبة"}
            ],
            evening: [
                {id: 1, text: "أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ، وَالْحَمْدُ لِلَّهِ، لَا إِلَٰهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ", reference: "رواه مسلم"},
                {id: 2, text: "اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ الْمَصِيرُ", reference: "رواه الترمذي"},
                {id: 3, text: "اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ", reference: "رواه البخاري"},
                {id: 4, text: "اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي، وَمِنْ شَرِّ كُلِّ دَابَّةٍ أَنْتَ آخِذٌ بِنَاصِيَتِهَا", reference: "رواه الترمذي"},
                {id: 5, text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ سُبْحَانَ اللَّهِ الْعَظِيمِ", reference: "رواه البخاري ومسلم"}
            ],
            sleep: [
                {id: 1, text: "بِاسْمِكَ رَبِّي وَضَعْتُ جَنْبِي، وَبِكَ أَرْفَعُهُ، إِنْ أَمْسَكْتَ نَفْسِي فَارْحَمْهَا، وَإِنْ أَرْسَلْتَهَا فَاحْفَظْهَا بِمَا تَحْفَظُ بِهِ عِبَادَكَ الصَّالِحِينَ", reference: "رواه البخاري"},
                {id: 2, text: "اللَّهُمَّ قِنِي عَذَابَكَ يَوْمَ تَبْعَثُ عِبَادَكَ", reference: "رواه الترمذي"},
                {id: 3, text: "اللَّهُمَّ أَسْلَمْتُ نَفْسِي إِلَيْكَ، وَوَجَّهْتُ وَجْهِي إِلَيْكَ، وَفَوَّضْتُ أَمْرِي إِلَيْكَ", reference: "رواه البخاري ومسلم"},
                {id: 4, text: "آمَنْتُ بِرَسُولِكَ الَّذِي أَرْسَلْتَ، وَبِكِتَابِكَ الَّذِي أَنْزَلْتَ", reference: "رواه البخاري"},
                {id: 5, text: "الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَكَفَانَا، وَآوَانَا، فَكَمْ مِمَّنْ لَا كَافِيَ لَهُ وَلَا مُؤْوِيَ", reference: "رواه مسلم"}
            ],
            wakeup: [
                {id: 1, text: "الْحَمْدُ لِلَّهِ الَّذِي أَحْيَانَا بَعْدَ مَا أَمَاتَنَا، وَإِلَيْهِ النُّشُورُ", reference: "رواه البخاري"},
                {id: 2, text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ، وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ", reference: "رواه البخاري"},
                {id: 3, text: "سُبْحَانَ اللَّهِ وَالْحَمْدُ لِلَّهِ، وَلَا إِلَهَ إِلَّا اللَّهُ، وَاللَّهُ أَكْبَرُ", reference: "رواه الترمذي"},
                {id: 4, text: "اللَّهُمَّ لَكَ الْحَمْدُ أَنْتَ قَيَّمُ السَّمَوَاتِ وَالْأَرْضِ وَمَنْ فِيهِنَّ", reference: "رواه مسلم"},
                {id: 5, text: "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ، وَإِلَيْكَ النُّشُورُ", reference: "رواه الترمذي"}
            ],
            prayer: [
                {id: 1, text: "سُبْحَانَكَ اللَّهُمَّ وَبِحَمْدِكَ، وَتَبَارَكَ اسْمُكَ، وَتَعَالَى جَدُّكَ، وَلَا إِلَهَ غَيْرُكَ", reference: "رواه الترمذي"},
                {id: 2, text: "أَعُوذُ بِاللَّهِ مِنَ الشَّيْطَانِ الرَّجِيمِ", reference: "القرآن الكريم"},
                {id: 3, text: "رَبِّ اغْفِرْ لِي، وَارْحَمْنِي، وَاهْدِنِي، وَارْزُقْنِي", reference: "رواه الترمذي"},
                {id: 4, text: "سُبْحَانَ رَبِّيَ الْعَظِيمِ", reference: "القرآن الكريم"},
                {id: 5, text: "سَمِعَ اللَّهُ لِمَنْ حَمِدَهُ، رَبَّنَا وَلَكَ الْحَمْدُ", reference: "رواه البخاري"}
            ],
            home: [
                {id: 1, text: "بِسْمِ اللَّهِ تَوَكَّلْتُ عَلَى اللَّهِ، وَلَا حَوْلَ وَلَا قُوَّةَ إِلَّا بِاللَّهِ", reference: "رواه أبو داود"},
                {id: 2, text: "اللَّهُمَّ إِنِّي أَسْأَلُكَ خَيْرَ هَذِهِ الْقَرْيَةِ، وَخَيْرَ أَهْلِهَا، وَأَعُوذُ بِكَ مِنْ شَرِّهَا، وَشَرِّ أَهْلِهَا", reference: "رواه النسائي"},
                {id: 3, text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ", reference: "رواه مسلم"},
                {id: 4, text: "بِسْمِ اللَّهِ وَلَجْنَا، وَبِسْمِ اللَّهِ خَرَجْنَا، وَعَلَى رَبِّنَا تَوَكَّلْنَا", reference: "رواه أبو داود"},
                {id: 5, text: "الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنَا وَسَقَانَا، وَجَعَلَنَا مُسْلِمِينَ", reference: "رواه الترمذي"}
            ],
            food: [
                {id: 1, text: "بِسْمِ اللَّهِ", reference: "رواه الترمذي"},
                {id: 2, text: "اللَّهُمَّ بَارِكْ لَنَا فِيهِ، وَأَطْعِمْنَا خَيْرًا مِنْهُ", reference: "رواه الترمذي"},
                {id: 3, text: "الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنِي هَذَا، وَرَزَقَنِيهِ مِنْ غَيْرِ حَوْلٍ مِنِّي وَلَا قُوَّةٍ", reference: "رواه أبو داود"},
                {id: 4, text: "الْحَمْدُ لِلَّهِ حَمْدًا كَثِيرًا طَيِّبًا مُبَارَكًا فِيهِ، غَيْرَ مَكْفِيٍّ وَلَا مُوَدَّعٍ وَلَا مُسْتَغْنًى عَنْهُ رَبَّنَا", reference: "رواه البخاري"},
                {id: 5, text: "مَنْ أَكَلَ طَعَامًا فَقَالَ: الْحَمْدُ لِلَّهِ الَّذِي أَطْعَمَنِي هَذَا وَرَزَقَنِيهِ مِنْ غَيْرِ حَوْلٍ مِنِّي وَلَا قُوَّةٍ؛ غُفِرَ لَهُ مَا تَقَدَّمَ مِنْ ذَنْبِهِ", reference: "رواه الترمذي"}
            ]
        };

        // ====== DOM Elements ======
        const adhkarContainer = document.getElementById('adhkar-container');
        const rosaryText = document.getElementById('rosary-text');
        const counterElement = document.getElementById('counter');
        const citySelect = document.getElementById('city-select');
        const sections = document.querySelectorAll('.section');
        const navLinks = document.querySelectorAll('.nav-link');
        const notificationBtn = document.getElementById('notification-btn');
        const adhanAudio = document.getElementById('adhan-audio');
        const dhikrAudio = document.getElementById('dhikr-audio');
        const compassNeedle = document.getElementById('compass-needle');
        const qiblaAngle = document.getElementById('qibla-angle');
        const shareModal = document.getElementById('share-modal');
        const closeShareModal = document.getElementById('close-share-modal');
        const usersList = document.getElementById('users-list');
        const adminSection = document.getElementById('admin-section');

        // ====== Functions ======
        function renderAdhkar(category) {
            adhkarContainer.innerHTML = '';
            const adhkarList = adhkarData[category] || [];
            
            adhkarList.forEach((adhkar, index) => {
                const dhikrCard = document.createElement('div');
                dhikrCard.className = 'dhikr-card';
                dhikrCard.innerHTML = `
                    <div class="dhikr-counter">${index + 1}</div>
                    <div class="dhikr-text">${adhkar.text}</div>
                    <div class="dhikr-reference">${adhkar.reference}</div>
                    <div class="dhikr-actions">
                        <button class="action-btn save-btn">
                            <i class="fas fa-heart"></i> حفظ
                        </button>
                        <button class="action-btn share-btn">
                            <i class="fas fa-share-alt"></i> مشاركة
                        </button>
                        <button class="action-btn listen-btn">
                            <i class="fas fa-volume-up"></i> استماع
                        </button>
                    </div>
                `;
                adhkarContainer.appendChild(dhikrCard);
            });
            
            // Add event listeners to new buttons
            document.querySelectorAll('.share-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    shareModal.style.display = 'flex';
                });
            });
            
            document.querySelectorAll('.listen-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    playDhikrAudio();
                });
            });
        }

        function updatePrayerTimes(city) {
            const times = prayerTimes[city] || prayerTimes.amman;
            document.getElementById('fajr').textContent = times.fajr;
            document.getElementById('sunrise').textContent = times.sunrise;
            document.getElementById('dhuhr').textContent = times.dhuhr;
            document.getElementById('asr').textContent = times.asr;
            document.getElementById('maghrib').textContent = times.maghrib;
            document.getElementById('isha').textContent = times.isha;
        }

        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
            });
            
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelector(`.nav-link[data-section="${sectionId}"]`).classList.add('active');
            
            // Initialize section content
            if (sectionId === 'adhkar-section') {
                renderAdhkar(currentCategory);
            } else if (sectionId === 'prayer-section') {
                updatePrayerTimes(citySelect.value);
                simulateCompass();
            } else if (sectionId === 'user-section') {
                loadUsers();
            }
            
            window.scrollTo(0, 0);
        }

        function simulateCompass() {
            // Fixed qibla direction for Jordan (135°)
            const qiblaDirection = 135;
            compassNeedle.style.transform = `translate(-50%, -100%) rotate(${qiblaDirection}deg)`;
            qiblaAngle.textContent = `${qiblaDirection}°`;
            
            // Add "Qibla" label
            const compassCircle = document.querySelector('.compass-circle');
            const qiblaLabel = document.getElementById('qibla-label');
            
            if (!qiblaLabel) {
                const label = document.createElement('div');
                label.id = 'qibla-label';
                label.className = 'qibla-label';
                label.textContent = 'القبلة';
                label.style.position = 'absolute';
                label.style.fontWeight = 'bold';
                label.style.color = '#d4af37';
                compassCircle.appendChild(label);
            }
            
            // Update label position
            const radius = 100;
            const angleRad = (qiblaDirection - 90) * Math.PI / 180;
            const x = radius * Math.cos(angleRad);
            const y = radius * Math.sin(angleRad);
            
            const qiblaLabelElement = document.getElementById('qibla-label');
            qiblaLabelElement.style.left = `calc(50% + ${x}px)`;
            qiblaLabelElement.style.top = `calc(50% + ${y}px)`;
            qiblaLabelElement.style.transform = 'translate(-50%, -50%)';
        }

        function playAdhan() {
            adhanAudio.play();
        }

        function playDhikrAudio() {
            dhikrAudio.play();
        }

        // ====== Firebase Functions ======
        function registerUser(email, password, name) {
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    db.collection("users").doc(user.uid).set({
                        name: name,
                        email: email,
                        role: "user"
                    })
                    .then(() => {
                        alert(`تم إنشاء حساب جديد للاسم: ${name}\nالبريد الإلكتروني: ${email}`);
                        document.getElementById('register-name').value = '';
                        document.getElementById('register-email').value = '';
                        document.getElementById('register-password').value = '';
                    })
                    .catch((error) => {
                        console.error("Error adding user: ", error);
                        alert("حدث خطأ أثناء تسجيل المستخدم");
                    });
                })
                .catch((error) => {
                    console.error("Error creating user: ", error);
                    alert("حدث خطأ أثناء إنشاء الحساب");
                });
        }

        function loginUser(email, password) {
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    db.collection("users").doc(user.uid).get()
                        .then((doc) => {
                            if (doc.exists) {
                                const userData = doc.data();
                                document.getElementById('auth-buttons').style.display = 'none';
                                document.getElementById('user-profile').style.display = 'flex';
                                document.getElementById('username').textContent = userData.name;
                                document.getElementById('user-avatar').textContent = userData.name.charAt(0);
                                
                                if (userData.role === "admin") {
                                    adminSection.style.display = 'block';
                                    loadUsers();
                                }
                                
                                alert('تم تسجيل الدخول بنجاح!');
                            }
                        })
                        .catch((error) => {
                            console.error("Error getting user data: ", error);
                        });
                })
                .catch((error) => {
                    console.error("Error signing in: ", error);
                    alert("البريد الإلكتروني أو كلمة المرور غير صحيحة");
                });
        }

        function loadUsers() {
            db.collection("users").get()
                .then((querySnapshot) => {
                    usersList.innerHTML = '';
                    querySnapshot.forEach((doc) => {
                        const user = doc.data();
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${user.name}</td>
                            <td>${user.email}</td>
                            <td>${user.role}</td>
                        `;
                        usersList.appendChild(row);
                    });
                })
                .catch((error) => {
                    console.error("Error loading users: ", error);
                });
        }

        function logoutUser() {
            auth.signOut().then(() => {
                document.getElementById('auth-buttons').style.display = 'flex';
                document.getElementById('user-profile').style.display = 'none';
                adminSection.style.display = 'none';
                alert('تم تسجيل الخروج بنجاح');
            }).catch((error) => {
                console.error("Error signing out: ", error);
            });
        }

        // ====== Event Listeners ======
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Initialize adhkar
            renderAdhkar(currentCategory);
            
            // Set initial prayer times
            updatePrayerTimes('amman');
            simulateCompass();
            
            // Mobile menu toggle
            document.getElementById('hamburger').addEventListener('click', () => {
                document.getElementById('nav-menu').classList.toggle('show');
            });
            
            // Navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    showSection(sectionId);
                });
            });
            
            // Footer links
            document.querySelectorAll('.footer-links a[data-section]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.dataset.section;
                    showSection(sectionId);
                });
            });
            
            // Footer category links
            document.querySelectorAll('.footer-links a[data-category]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    showSection('adhkar-section');
                    currentCategory = link.dataset.category;
                    renderAdhkar(currentCategory);
                });
            });
            
            // Feature cards navigation
            document.querySelectorAll('.feature-card').forEach(card => {
                card.addEventListener('click', () => {
                    const sectionId = card.dataset.section;
                    showSection(sectionId);
                });
            });
            
            // Back buttons
            document.querySelectorAll('.back-button').forEach(btn => {
                btn.addEventListener('click', () => {
                    showSection(btn.dataset.section);
                });
            });
            
            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentCategory = btn.dataset.category;
                    renderAdhkar(currentCategory);
                });
            });
            
            // Rosary functionality
            document.getElementById('count-btn').addEventListener('click', () => {
                rosaryCount++;
                counterElement.textContent = rosaryCount;
                
                if (rosaryCount % 33 === 0) {
                    if (rosaryDhikr === 'سُبْحَانَ اللَّهِ') {
                        rosaryDhikr = 'الْحَمْدُ لِلَّهِ';
                    } else if (rosaryDhikr === 'الْحَمْدُ لِلَّهِ') {
                        rosaryDhikr = 'اللَّهُ أَكْبَرُ';
                    } else {
                        rosaryDhikr = 'سُبْحَانَ اللَّهِ';
                    }
                    rosaryText.textContent = rosaryDhikr;
                }
                
                counterElement.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    counterElement.style.transform = 'scale(1)';
                }, 300);
            });
            
            document.getElementById('reset-btn').addEventListener('click', () => {
                rosaryCount = 0;
                counterElement.textContent = rosaryCount;
                rosaryText.textContent = 'سُبْحَانَ اللَّهِ';
            });
            
            // Preset buttons
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    rosaryCount = parseInt(btn.dataset.count);
                    counterElement.textContent = rosaryCount;
                    rosaryText.textContent = 'سُبْحَانَ اللَّهِ';
                });
            });
            
            // City selector
            citySelect.addEventListener('change', (e) => {
                updatePrayerTimes(e.target.value);
            });
            
            // Vibrate button
            document.getElementById('vibrate-btn').addEventListener('click', () => {
                if (navigator.vibrate) {
                    navigator.vibrate([200]);
                }
            });
            
            // Notification button
            notificationBtn.addEventListener('click', () => {
                alert('سيتم تفعيل التنبيهات في الإصدار القادم إن شاء الله');
            });
            
            // Play adhan button
            document.getElementById('sound-btn').addEventListener('click', playAdhan);
            
            // Close share modal
            closeShareModal.addEventListener('click', () => {
                shareModal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === shareModal) {
                    shareModal.style.display = 'none';
                }
            });
            
            // User login
            document.getElementById('login-form-btn').addEventListener('click', () => {
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                if(email && password) {
                    loginUser(email, password);
                } else {
                    alert('الرجاء ملء جميع الحقول');
                }
            });
            
            // User registration
            document.getElementById('register-form-btn').addEventListener('click', () => {
                const name = document.getElementById('register-name').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                if(name && email && password) {
                    registerUser(email, password, name);
                } else {
                    alert('الرجاء ملء جميع الحقول');
                }
            });
            
            // Logout
            document.getElementById('logout-btn').addEventListener('click', logoutUser);
            
            // Forgot password
            document.getElementById('forgot-password').addEventListener('click', (e) => {
                e.preventDefault();
                const email = prompt("الرجاء إدخال بريدك الإلكتروني لإعادة تعيين كلمة المرور:");
                if (email) {
                    auth.sendPasswordResetEmail(email)
                        .then(() => {
                            alert("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني");
                        })
                        .catch((error) => {
                            console.error("Error sending reset email: ", error);
                            alert("حدث خطأ أثناء إرسال رابط إعادة التعيين");
                        });
                }
            });
            
            // Check auth state
            auth.onAuthStateChanged((user) => {
                if (user) {
                    db.collection("users").doc(user.uid).get()
                        .then((doc) => {
                            if (doc.exists) {
                                const userData = doc.data();
                                document.getElementById('auth-buttons').style.display = 'none';
                                document.getElementById('user-profile').style.display = 'flex';
                                document.getElementById('username').textContent = userData.name;
                                document.getElementById('user-avatar').textContent = userData.name.charAt(0);
                                
                                if (userData.role === "admin") {
                                    adminSection.style.display = 'block';
                                    loadUsers();
                                }
                            }
                        });
                } else {
                    document.getElementById('auth-buttons').style.display = 'flex';
                    document.getElementById('user-profile').style.display = 'none';
                    adminSection.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>
